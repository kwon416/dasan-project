<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.dasancall.service.batchdbImpl.BatchSourceMapper">

	<select id="testDb" parameterType="hashmap" resultType="integer">
		SELECT 3 as cnt
<!-- 		SELECT STDR_DE, STDR_TM, ADMD_CD, GU_CD, ADMD_CD, SAFE_IDEX FROM SOSS.DM_SAFE_IDEX_GRID LIMIT 10 -->
	</select>

	<select id="getConsultCount" parameterType="hashmap" resultType="long">
		select count(*)
		from tb_bach_consultation
		where yy=#{yy} and mm=#{mm} and dd=#{dd}
	</select>

	<select id="selectBatchConsult" parameterType="hashmap" resultType="egovMap">
		select yy, mm, dd, hh, keyword, gu, dong, count(*) as cnt
		from tb_bach_consultation
		where yy=#{yy} and mm=#{mm} and dd=#{dd}
		group by yy, mm, dd, hh, keyword, gu, dong
	</select>

	<select id="getCallCount" parameterType="hashmap" resultType="long">
		select count(*)
		from tb_real_time
		where yy=#{yy} and mm=#{mm} and dd=#{dd} and hh=#{hh}
	</select>

	<select id="selectBatchCall" parameterType="hashmap" resultType="egovMap">
		select yy, mm, dd, hh, keyword, gu, count(*) as cnt
		from tb_real_time
		where yy=#{yy} and mm=#{mm} and dd=#{dd} and hh=#{hh}
		group by yy, mm, dd, hh, keyword, gu
	</select>


</mapper>