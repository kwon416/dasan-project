<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.dasancall.service.impl.BatchTargetMapper">

<!-- 	<insert id="insertBatchFailInfo" parameterType="hashmap">
		INSERT INTO BATCH_FAIL_INFO (
			TBL_NM, QUERY, MSG
		) VALUES (
			#{tblNm}, #{query}, #{msg}
		)
	</insert> -->

	<insert id="insertStatConsult" parameterType="hashmap">
		insert into tb_stat_consult(
			yyyy, mm, dd, hh, keyword, gu, dong, cnt
		) values
		<foreach collection="list" item="item" separator=",">
			(#{item.yy}, #{item.mm}, #{item.dd}, #{item.hh}, #{item.keyword}, #{item.gu}, #{item.dong}, #{item.cnt})
		</foreach>
	</insert>
	
	<delete id="deleteStatConsult" parameterType="egovMap">
		delete from tb_stat_consult
		where yyyy=#{yy} and mm=#{mm} and dd=#{dd}
	</delete>

	<insert id="insertStatCall" parameterType="hashmap">
		insert into tb_stat_call(
			yyyy, mm, dd, hh, keyword, gu, dong, cnt
		) values
		<foreach collection="list" item="item" separator=",">
			(#{item.yy}, #{item.mm}, #{item.dd}, #{item.hh}, #{item.keyword}, #{item.gu}, null, #{item.cnt})
		</foreach>
	</insert>
	
	<delete id="deleteStatCall" parameterType="egovMap">
		delete from tb_stat_call
		where yyyy=#{yy} and mm=#{mm} and dd=#{dd} and hh=#{hh}
	</delete>

	<select id="selectAllsetting" parameterType="egovMap" resultType="egovMap">
		/* SrvcMapper.selectAllsetting */
		SELECT * FROM SETTING ORDER BY USER_SEQ ASC
	</select>
</mapper>